import{U as z,M as E,a5 as H,Z as R,K as A,J as F,r as G,c as T,aa as J,o as K,X as O,Y as W,h as i,j as a,a as n,k as s,z as m,m as r,x as q,$ as l,I as c,G as v,H as y,l as I,B as f,ab as X,V as Y,W as Z,ac as Q}from"./index.d80bb040.js";import{C as ss}from"./Comments.865346e3.js";const d=k=>(Y("data-v-6ec8be45"),k=k(),Z(),k),os={class:"song"},ts={key:0,class:"song-container"},es={class:"song-main"},ns={class:"song-l"},is={class:"cover"},as={class:"cover-img"},cs=d(()=>s("div",{slot:"placeholder",class:"image-slot"},[s("i",{class:"iconfont icon-placeholder"})],-1)),ls={class:"cover-play-img"},ds=d(()=>s("div",{slot:"placeholder",class:"image-slot"},[s("i",{class:"iconfont icon-placeholder"})],-1)),rs={class:"song-oper"},_s=d(()=>s("i",{class:"iconfont icon-add"},null,-1)),us=l(" \u6DFB\u52A0"),ms=[_s,us],gs=d(()=>s("span",{class:"play-btn play-collect"},[s("i",{class:"iconfont icon-collect"}),l(" \u6536\u85CF")],-1)),ps=d(()=>s("i",{class:"iconfont icon-comment"},null,-1)),hs=l(" \u8BC4\u8BBA"),vs=[ps,hs],fs={class:"simi-song"},ys=d(()=>s("h3",{class:"simi-song-title"},"\u76F8\u4F3C\u6B4C\u66F2",-1)),Is={class:"aside-main"},ks={class:"simi-info"},bs={class:"simi-author"},$s={class:"simi-song-status"},Ss={key:0,class:"iconfont icon-vip"},xs=["onClick"],Cs=["onClick"],Bs={class:"song-m"},Ds={class:"song-info"},Ts={class:"song-info-head"},qs={class:"song-title"},Ls=d(()=>s("i",{class:"iconfont icon-mvlist"},null,-1)),Ps={key:1,class:"iconfont icon-vip"},ws={key:0,class:"song-desc"},Us={class:"song-related"},Vs={class:"song-author"},js=l(" \u6B4C\u624B\uFF1A "),Ms={class:"song-album"},Ns=l(" \u6240\u5C5E\u4E13\u8F91\uFF1A"),zs={class:"lyrics"},Es={class:"song-aside"},Hs={key:0,class:"sidebar-box playlist-simi"},Rs=d(()=>s("h3",{class:"aside-title"},"\u5305\u542B\u8FD9\u9996\u6B4C\u7684\u6B4C\u5355",-1)),As={class:"aside-main"},Fs=d(()=>s("div",{slot:"placeholder",class:"image-slot"},[s("i",{class:"iconfont icon-placeholder"})],-1)),Gs={class:"playlist-info"},Js={class:"playlist-name"},Ks={class:"playlist-author"},Os=l(" By. "),Ws={key:1,class:"sidebar-box simi-mlog"},Xs=d(()=>s("h3",{class:"aside-title"},"\u76F8\u5173\u89C6\u9891",-1)),Ys={class:"aside-main"},Zs={class:"mlog-img"},Qs=d(()=>s("i",{class:"iconfont icon-mvlist"},null,-1)),so=d(()=>s("div",{slot:"placeholder",class:"image-slot"},[s("i",{class:"iconfont icon-placeholder"})],-1)),oo={class:"mlog-time"},to=d(()=>s("i",{class:"iconfont icon-time"},null,-1)),eo={class:"mlog-name"},no={class:"mlog-footer"},io={class:"mlog-author"},ao={class:"mlog-pubTime"},co={setup(k){const{proxy:_}=E(),L=H(),g=R.playListInfoStore(),o=A({sId:"",coverDesc:"",songInfo:null,simiSong:[],playlists:[],simiArtist:[],simiUser:[],mlog:[],commentType:0}),P=F("currentTime"),S=G(),$=T(()=>g.playList[g.playIndex]),x=T(()=>e=>["iconfont","playicon",g.isPlayed&&e.id===$.value.id?"icon-pause":"icon-play"]),w=async()=>{const{data:e}=await _.$http.songDetail({ids:o.sId,timestamp:new Date().valueOf()});if(e.code!==200)return _.$msg.error("\u6570\u636E\u8BF7\u6C42\u5931\u8D25");e.songs[0].license=!e.privileges[0].cp,o.songInfo=_.$utils.formatSongs(e.songs,e.privileges)[0],o.coverDesc=o.songInfo.alia.join(" / ")},U=async()=>{const{data:e}=await _.$http.simiPlayList({id:o.sId});if(e.code!==200)return _.$msg.error("\u6570\u636E\u8BF7\u6C42\u5931\u8D25");o.playlists=e.playlists},V=async()=>{const{data:e}=await _.$http.mlog({id:o.sId});if(e.code!==200)return _.$msg.error("\u6570\u636E\u8BF7\u6C42\u5931\u8D25");o.mlog=e.data.feeds},j=async()=>{const{data:e}=await _.$http.simiSong({id:o.sId});if(e.code!==200)return _.$msg.error("\u6570\u636E\u8BF7\u6C42\u5931\u8D25");o.simiSong=e.songs.map(h=>Q(h))},C=e=>{if(!$.value||$.value.id!==e.id){if(e.license){_.$msg.error("\u7531\u4E8E\u7248\u6743\u4FDD\u62A4\uFF0C\u60A8\u6240\u5728\u7684\u5730\u533A\u6682\u65F6\u65E0\u6CD5\u4F7F\u7528\u3002");return}if(e.vip){_.$msg.error("\u4ED8\u8D39\u6B4C\u66F2\uFF0C\u8BF7\u5728\u7F51\u6613\u4E91\u97F3\u4E50\u64AD\u653E");return}g.selectPlay([e]),g.$patch({isPlayed:!0})}else g.$patch({isPlayed:!g.isPlayed})},B=e=>{g.addToList([e])},M=()=>{S.value.scrollIntoView(!0)};J(e=>{o.sId=e.query.id,D()}),K(()=>{o.sId=L.query.id,D()});const D=()=>{o.sId&&(w(),j(),U(),V())};return(e,h)=>{const b=O,p=W("router-link");return i(),a("div",os,[n(o).songInfo?(i(),a("div",ts,[s("div",es,[s("div",ns,[s("div",is,[s("div",as,[m(b,{src:n(o).songInfo.album.picUrl},{default:r(()=>[cs]),_:1},8,["src"])]),s("div",ls,[m(b,{src:n(o).songInfo.album.picUrl},{default:r(()=>[ds]),_:1},8,["src"])])]),s("div",rs,[s("span",{class:"play-btn play-all",onClick:h[0]||(h[0]=t=>C(n(o).songInfo))},[s("i",{class:q(n(x)(n(o).songInfo))},null,2),l(" "+c(n(o).songInfo.vip?"VIP\u5C0A\u4EAB":"\u64AD\u653E"),1)]),s("span",{class:"play-btn play-add",onClick:h[1]||(h[1]=t=>B(n(o).songInfo))},ms),gs,s("span",{class:"play-btn play-comment",onClick:M},vs)]),s("div",fs,[ys,s("div",Is,[(i(!0),a(v,null,y(n(o).simiSong,t=>(i(),a("div",{class:"simi-item",key:t.id},[s("div",ks,[m(p,{class:"simi-name",to:{path:"/song",query:{id:t.id}}},{default:r(()=>[l(c(t.name),1)]),_:2},1032,["to"]),s("div",bs,[(i(!0),a(v,null,y(t.singer,(u,N)=>(i(),I(p,{to:{path:"/singer/detail",query:{id:u.id}},class:"song-author",key:u.name},{default:r(()=>[l(c(N!==0?" / "+u.name:u.name),1)]),_:2},1032,["to"]))),128))])]),s("div",$s,[t.vip?(i(),a("i",Ss)):(i(),a(v,{key:1},[s("i",{onClick:u=>C(t),class:q(n(x)(t))},null,10,xs),s("i",{class:"iconfont icon-add",title:"\u6DFB\u52A0\u5230\u5217\u8868",onClick:u=>B(t)},null,8,Cs)],64))])]))),128))])])]),s("div",Bs,[s("div",Ds,[s("div",Ts,[s("div",qs,c(n(o).songInfo.name),1),n(o).songInfo.mvId?(i(),I(p,{key:0,class:"song-mv",to:{path:"/mv",query:{id:n(o).songInfo.mvId}}},{default:r(()=>[Ls]),_:1},8,["to"])):f("",!0),n(o).songInfo.vip?(i(),a("i",Ps)):f("",!0)]),n(o).coverDesc?(i(),a("div",ws,c(n(o).coverDesc),1)):f("",!0),s("div",Us,[s("div",Vs,[js,(i(!0),a(v,null,y(n(o).songInfo.singer,(t,u)=>(i(),I(p,{to:{path:"/singer/detail",query:{id:t.id}},class:"song-author",key:t.name},{default:r(()=>[l(c(u!==0?" / "+t.name:t.name),1)]),_:2},1032,["to"]))),128))]),s("div",Ms,[Ns,m(p,{class:"song-album",to:{path:"/album",query:{id:n(o).songInfo.album.id}}},{default:r(()=>[l(c(n(o).songInfo.album.name),1)]),_:1},8,["to"])])])]),s("div",zs,[m(X,{sId:n(o).sId,currentTime:n(P),maxH:"500px"},null,8,["sId","currentTime"])]),s("div",{class:"song-comments",ref_key:"cBox",ref:S},[m(ss,{type:n(o).commentType,sId:n(o).sId},null,8,["type","sId"])],512)])]),s("div",Es,[n(o).playlists.length?(i(),a("div",Hs,[Rs,s("div",As,[(i(!0),a(v,null,y(n(o).playlists,t=>(i(),I(p,{class:"playlist-item",to:{path:"/playlist/detail",query:{id:t.id}},key:t.id},{default:r(()=>[m(b,{src:t.coverImgUrl},{default:r(()=>[Fs]),_:2},1032,["src"]),s("div",Gs,[s("div",Js,c(t.name),1),s("div",Ks,[Os,m(p,{to:{path:"/home",query:{id:t.creator.userId}}},{default:r(()=>[l(c(t.creator.nickname),1)]),_:2},1032,["to"])])])]),_:2},1032,["to"]))),128))])])):f("",!0),n(o).mlog.length?(i(),a("div",Ws,[Xs,s("div",Ys,[(i(!0),a(v,null,y(n(o).mlog,(t,u)=>(i(),I(p,{to:{path:"/mv",query:{id:t.id}},class:"mlog-item",key:t.id},{default:r(()=>[s("div",Zs,[Qs,m(b,{src:t.resource.mlogBaseData.coverUrl,class:"mlog-cover"},{default:r(()=>[so]),_:2},1032,["src"])]),s("div",oo,[to,l(" "+c(e.$utils.formatSongTime(t.resource.mlogBaseData.duration)),1)]),s("div",eo,c(t.resource.mlogBaseData.text),1),s("div",no,[s("span",io,c(t.resource.userProfile.nickname),1),s("span",ao,c(e.$utils.formatMsgTime(t.resource.mlogBaseData.pubTime)),1)])]),_:2},1032,["to"]))),128))])])):f("",!0)])])):f("",!0)])}}};var _o=z(co,[["__scopeId","data-v-6ec8be45"]]);export{_o as default};
