import{U as M,M as q,Z as D,a5 as T,K as V,aa as z,o as U,X as E,Y as R,h as c,j as d,a as o,k as t,z as u,m as r,$ as n,I as e,G as I,H as g,B as h,x as v,V as j,W as F,a9 as G,l as $}from"./index.d80bb040.js";import{C as H}from"./Comments.865346e3.js";const m=_=>(j("data-v-c50b3e06"),_=_(),F(),_),K={class:"album"},W={key:0,class:"album-container"},X={class:"album-main"},Y={class:"album-cover"},Z={class:"album-img"},J=m(()=>t("div",{slot:"placeholder",class:"image-slot"},[t("i",{class:"iconfont icon-placeholder"})],-1)),O={class:"album-info"},P={class:"album-title"},Q={class:"album-singer"},ss=n("\u6B4C\u624B\uFF1A"),ts={class:"album-time"},os={key:0,class:"album-company"},as={key:1,class:"album-digital"},es={class:"album-share"},ns=m(()=>t("i",{class:"iconfont icon-share"},null,-1)),is={class:"album-collect"},ls=m(()=>t("i",{class:"iconfont icon-collect"},null,-1)),cs={class:"album-comment"},ds=m(()=>t("i",{class:"iconfont icon-comment"},null,-1)),ms={class:"album-box"},us={key:0,class:"album-desc"},rs=m(()=>t("h4",null,"\u4E13\u8F91\u4ECB\u7ECD",-1)),_s={class:"album-desc-all"},bs={class:"song-comments"},hs={class:"song-main"},ps={class:"song-header"},fs=n("\u4E13\u8F91\u6B4C\u66F2\u5217\u8868 "),ys=m(()=>t("i",{class:"iconfont icon-audio-play"},null,-1)),Is=n(" \u64AD\u653E\u5168\u90E8"),gs=[ys,Is],vs={class:"comments-main",ref:"cBox"},$s={class:"album-aside"},ks={class:"album-other"},As={class:"aside-title"},Cs=n("\u5168\u90E8>>"),Ss={class:"aside-main aside-album-main"},Ls=m(()=>t("div",{slot:"placeholder",class:"image-slot"},[t("i",{class:"iconfont icon-placeholder"})],-1)),Ns={class:"aside-album-info"},xs={class:"aside-album-name"},Bs={class:"aside-album-time"},ws={setup(_){const{proxy:i}=q(),k=D.playListInfoStore(),A=T(),s=V({albumId:"",albumInfo:null,songList:[],dynamic:null,hotAlbums:[],commentType:3}),C=async()=>{const{data:a}=await i.$http.album({id:s.albumId});if(a.code!==200)return i.$msg.error("\u6570\u636E\u8BF7\u6C42\u5931\u8D25");s.albumInfo=a.album;const p=[];a.songs.forEach(b=>{p.push(b.privilege)}),s.songList=i.$utils.formatSongs(a.songs,p),L()},S=async()=>{const{data:a}=await i.$http.albumDynamic({id:s.albumId});if(a.code!==200)return i.$msg.error("\u6570\u636E\u8BF7\u6C42\u5931\u8D25");s.dynamic=a},L=async()=>{const{data:a}=await i.$http.artistAlbum({id:s.albumInfo.artists[0].id,limit:5});if(a.code!==200)return i.$msg.error("\u6570\u636E\u8BF7\u6C42\u5931\u8D25");s.hotAlbums=a.hotAlbums},N=()=>{k.playAll(s.songList)},x=async()=>{const{data:a}=await i.$http.albumSub({id:s.albumId,t:Number(!s.dynamic.isSub)});if(a.code!==200)return i.$msg.error("\u6570\u636E\u8BF7\u6C42\u5931\u8D25");s.dynamic.isSub=Number(!s.dynamic.isSub)};z(a=>{s.albumId=a.query.id,y()}),U(()=>{s.albumId=A.query.id,y()});const y=()=>{s.albumId&&(C(),S())};return(a,p)=>{const b=E,f=R("router-link"),B=G;return c(),d("div",K,[o(s).albumInfo?(c(),d("div",W,[t("div",X,[t("div",Y,[t("div",Z,[u(b,{src:o(s).albumInfo.picUrl},{default:r(()=>[J]),_:1},8,["src"])]),t("div",O,[t("div",P,[n(e(o(s).albumInfo.name),1),t("span",null,e("#"+o(s).albumInfo.type),1)]),t("div",Q,[ss,(c(!0),d(I,null,g(o(s).albumInfo.artists,(l,w)=>(c(),$(f,{to:{path:"/singer/detail",query:{id:l.id}},class:"song_name",key:l.name},{default:r(()=>[n(e(w!==0?" / "+l.name:l.name),1)]),_:2},1032,["to"]))),128))]),t("div",ts,"\u53D1\u884C\u65F6\u95F4\uFF1A"+e(a.$utils.formartDate(o(s).albumInfo.publishTime,"yyyy-MM-dd")),1),o(s).albumInfo.company?(c(),d("div",os,"\u53D1\u884C\u516C\u53F8\uFF1A"+e(o(s).albumInfo.company),1)):h("",!0),o(s).dynamic?(c(),d("div",as,[t("span",es,[ns,n(" "+e(a.$utils.formartNum(o(s).dynamic.shareCount))+"\u6B21\u5206\u4EAB",1)]),t("span",is,[ls,n(" "+e(a.$utils.formartNum(o(s).dynamic.subCount))+"\u6B21\u8BA2\u9605",1)]),t("span",cs,[ds,n(" "+e(a.$utils.formartNum(o(s).dynamic.commentCount))+"\u6761\u7559\u8A00",1)])])):h("",!0)])]),t("div",ms,[o(s).albumInfo.description?(c(),d("div",us,[rs,t("pre",_s,"                            "+e(o(s).albumInfo.description)+`\r
                        `,1)])):h("",!0),t("div",bs,[t("div",hs,[t("div",ps,[t("h4",null,[fs,t("em",null,"\u5171 "+e(o(s).albumInfo.size+" \u9996\u6B4C"),1)]),t("span",{class:"play-all",onClick:N},gs),t("span",{class:v(["collect",o(s).albumInfo.subscribed?"active":""]),onClick:x},[t("i",{class:v(["iconfont","icon-collect"+(o(s).albumInfo.subscribed?"-active":"")])},null,2),n(" "+e(o(s).albumInfo.subscribed?"\u5DF2\u6536\u85CF":"\u6536\u85CF"),1)],2)]),u(B,{songList:o(s).songList,stripe:!0},null,8,["songList"])]),t("div",vs,[u(H,{type:o(s).commentType,sId:o(s).albumId},null,8,["type","sId"])],512)])])]),t("div",$s,[t("div",ks,[t("h3",As,[n(e(o(s).albumInfo.artists[0].name)+"\u7684\u5176\u4ED6\u4E13\u8F91",1),u(f,{to:{path:"/singer/detail",query:{id:o(s).albumInfo.artists[0].id,type:"album"}},class:"album-more"},{default:r(()=>[Cs]),_:1},8,["to"])]),t("div",Ss,[(c(!0),d(I,null,g(o(s).hotAlbums,l=>(c(),$(f,{class:"aside-album-item",to:{path:"/album",query:{id:l.id}},key:l.id},{default:r(()=>[u(b,{src:l.picUrl},{default:r(()=>[Ls]),_:2},1032,["src"]),t("div",Ns,[t("div",xs,e(l.name),1),t("div",Bs,e(a.$utils.formartDate(o(s).albumInfo.publishTime,"yyyy-MM-dd")),1)])]),_:2},1032,["to"]))),128))])])])])):h("",!0)])}}};var Ds=M(ws,[["__scopeId","data-v-c50b3e06"]]);export{Ds as default};
