import{U as R,M as x,Z as b,a5 as z,K as j,o as E,aa as F,X as P,Y as G,h as i,j as n,k as s,z as p,a as e,m as r,G as g,H as L,B as v,I as l,l as k,$ as u,x as D,a9 as K,V as O,W,a8 as X}from"./index.d80bb040.js";const d=I=>(O("data-v-3acc02c9"),I=I(),W(),I),Y={class:"detail"},Z={class:"detail-container"},J={class:"detail-main"},Q={class:"cover"},ss={class:"cover-img"},ts=d(()=>s("div",{slot:"placeholder",class:"image-slot"},[s("i",{class:"iconfont icon-placeholder"})],-1)),es={class:"cover-desc"},os=d(()=>s("h4",null,"\u6807\u7B7E",-1)),as={key:0,class:"cover-tags"},is=u("\u66F4\u65B0\u65F6\u95F4"),ls=d(()=>s("h4",null,"\u559C\u6B22\u8FD9\u4E2A\u6B4C\u5355\u7684\u4EBA",-1)),cs={class:"sub-playlist"},ns=d(()=>s("div",{slot:"placeholder",class:"image-slot"},[s("i",{class:"iconfont icon-placeholder"})],-1)),ds=d(()=>s("h4",null,"\u4ECB\u7ECD",-1)),rs={class:"cover-desc-all"},_s={class:"detail-info"},us={class:"cover-info"},ms={class:"cover-header"},hs={class:"cover-author"},ps=d(()=>s("div",{slot:"placeholder",class:"image-slot"},[s("i",{class:"iconfont icon-placeholder"})],-1)),gs={class:"cover-name"},vs=d(()=>s("div",{slot:"placeholder",class:"image-slot"},[s("i",{class:"iconfont icon-placeholder"})],-1)),ys={class:"cover-date"},fs={class:"cover-digital"},ks={class:"cover-playCount"},Is=d(()=>s("i",{class:"iconfont icon-playnum"},null,-1)),Ls={class:"cover-collect"},bs=d(()=>s("i",{class:"iconfont icon-collect"},null,-1)),$s={class:"cover-comment"},Cs=d(()=>s("i",{class:"iconfont icon-comment"},null,-1)),Ds={class:"song-main"},Ss={class:"song-header"},qs=u("\u6B4C\u66F2\u5217\u8868 "),Us=d(()=>s("i",{class:"iconfont icon-audio-play"},null,-1)),ws=u(" \u64AD\u653E\u5168\u90E8"),Ns=[Us,ws],Bs={key:0,class:"showAllSongsTips"},Ms={class:"detail-aside"},As=d(()=>s("div",{class:"aside-title"},"\u76F8\u5173\u6B4C\u5355\u63A8\u8350",-1)),Ts={class:"aside-main recom-main"},Vs=d(()=>s("div",{slot:"placeholder",class:"image-slot"},[s("i",{class:"iconfont icon-placeholder"})],-1)),Hs={class:"recom-info"},Rs={class:"recom-name"},xs={class:"recom-author"},zs=u(" By. "),js={key:1,class:"playlist-comment"},Es=d(()=>s("div",{class:"aside-title"},"\u6B4C\u5355\u8BC4\u8BBA",-1)),Fs={class:"aside-main comment-main"},Ps=d(()=>s("div",{slot:"placeholder",class:"image-slot"},[s("i",{class:"iconfont icon-placeholder"})],-1)),Gs={class:"comment-info"},Ks={class:"comment-userInfo"},Os={class:"comment-date"},Ws={class:"comment-desc"},Xs={setup(I){const{proxy:m}=x(),$=b.accountInfoStore(),S=b.loginDialogStore(),q=b.playListInfoStore(),U=z(),t=j({id:"",details:{},isLoading:!0,songList:[],playlists:[],comments:[],total:0,loading:!0}),w=async a=>{t.isLoading=!0;const{data:c}=await m.$http.playListDetail(a);if(c.code!==200)return m.$msg.error("\u6570\u636E\u8BF7\u6C42\u5931\u8D25");t.details=c.playlist,$.getLogin?N(c.playlist.trackIds):(t.songList=m.$utils.formatSongs(c.playlist.tracks,c.privileges),t.total=t.songList.length,t.isLoading=!1)},N=async a=>{const c=[];let _=[];for(let h=0;h<a.length;h+=500)c.push(a.slice(h,h+500));for(let h=0;h<c.length;h++){const o=[];c[h].map(H=>{o.push(H.id)}),t.isLoading=!0;const{data:f}=await m.$http.songDetail({ids:o.join(","),timestamp:new Date().valueOf()+h});_=_.concat(m.$utils.formatSongs(f.songs,f.privileges))}t.songList=_,t.total=_.length,t.isLoading=!1},B=async a=>{const{data:c}=await m.$http.playlistRelated(a);if(c.code!==200)return m.$msg.error("\u6570\u636E\u8BF7\u6C42\u5931\u8D25");t.playlists=c.playlists},M=async a=>{const{data:c}=await m.$http.playlistComment(a);if(c.code!==200)return m.$msg.error("\u6570\u636E\u8BF7\u6C42\u5931\u8D25");t.comments=c.comments},C=a=>{w({id:a,s:8}),B({id:a}),M({id:a,limit:8})},A=()=>{S.loginDialogVisible=!0},T=()=>{q.playAll(t.songList)},V=async()=>{const{data:a}=await m.$http.subPlayList({id:t.details.id,t:t.details.subscribed?2:1});if(a.code!==200)return m.$msg.error("\u6570\u636E\u8BF7\u6C42\u5931\u8D25");t.details.subscribed=!t.details.subscribed};return E(()=>{t.id=U.query.id||"",C(t.id)}),F(a=>{t.songList=[],t.total=0,t.id=a.query.id,C(t.id)}),(a,c)=>{const y=P,_=G("router-link"),h=X;return i(),n("div",Y,[s("div",Z,[s("div",J,[s("div",Q,[s("div",ss,[p(y,{src:e(t).details.coverImgUrl},{default:r(()=>[ts]),_:1},8,["src"])]),s("div",es,[e(t).details.tags&&e(t).details.tags.length?(i(),n(g,{key:0},[os,e(t).details.tags?(i(),n("div",as,[(i(!0),n(g,null,L(e(t).details.tags,(o,f)=>(i(),k(_,{to:{path:"/playlist",query:{cat:o}},class:"tag",key:f},{default:r(()=>[u("#"+l(o),1)]),_:2},1032,["to"]))),128))])):v("",!0)],64)):v("",!0),e(t).details.trackNumberUpdateTime?(i(),n(g,{key:1},[s("h4",null,[is,s("em",null,l(e(t).details.updateFrequency),1)]),s("p",null,l(a.$utils.formartDate(e(t).details.trackNumberUpdateTime,"yyyy-MM-dd HH:mm:ss")),1)],64)):v("",!0),e(t).details.subscribers?(i(),n(g,{key:2},[ls,s("div",cs,[(i(!0),n(g,null,L(e(t).details.subscribers,(o,f)=>(i(),k(_,{to:{path:"/home",query:{id:o.userId}},class:"author-home",key:o.name},{default:r(()=>[p(y,{src:o.avatarUrl,class:"cover-avatarIcon"},{default:r(()=>[ns]),_:2},1032,["src"])]),_:2},1032,["to"]))),128))])],64)):v("",!0),e(t).details.description?(i(),n(g,{key:3},[ds,s("pre",rs,"                            "+l(e(t).details.description)+`\r
                        `,1)],64)):v("",!0)])]),s("div",_s,[s("div",us,[s("div",ms,l(e(t).details.name),1),s("div",hs,[e(t).details.creator?(i(),n(g,{key:0},[p(_,{to:{path:"/home",query:{id:e(t).details.creator.userId}},class:"author-home"},{default:r(()=>[p(y,{src:e(t).details.creator.avatarUrl,class:"cover-avatar"},{default:r(()=>[ps]),_:1},8,["src"])]),_:1},8,["to"]),s("div",gs,[p(_,{to:{path:"/home",query:{id:e(t).details.creator.userId}},class:"author-home"},{default:r(()=>[u(l(e(t).details.creator.nickname),1)]),_:1},8,["to"]),e(t).details.creator.avatarDetail?(i(),k(y,{key:0,src:e(t).details.creator.avatarDetail.identityIconUrl,class:"cover-avatarIcon"},{default:r(()=>[vs]),_:1},8,["src"])):v("",!0)]),s("div",ys,l(a.$utils.formartDate(e(t).details.createTime,"yyyy-MM-dd"))+" \u521B\u5EFA",1)],64)):v("",!0)]),s("div",fs,[s("span",ks,[Is,u(" "+l(a.$utils.formartNum(e(t).details.playCount))+"\u6B21\u64AD\u653E",1)]),s("span",Ls,[bs,u(" "+l(a.$utils.formartNum(e(t).details.subscribedCount))+"\u6B21\u6536\u85CF",1)]),s("span",$s,[Cs,u(" "+l(a.$utils.formartNum(e(t).details.commentCount))+"\u6761\u7559\u8A00",1)])])]),s("div",Ds,[s("div",Ss,[s("h4",null,[qs,s("em",null,"\u5171 "+l(e(t).total+" \u9996\u6B4C"),1)]),s("span",{class:"play-all",onClick:T},Ns),s("span",{class:D(["collect",e(t).details.subscribed?"active":""]),onClick:V},[s("i",{class:D(["iconfont","icon-collect"+(e(t).details.subscribed?"-active":"")])},null,2),u(" "+l(e(t).details.subscribed?"\u5DF2\u6536\u85CF":"\u6536\u85CF"),1)],2)]),e(t).isLoading?(i(),k(h,{key:0})):(i(),n(g,{key:1},[p(K,{songList:e(t).songList,stripe:!0},null,8,["songList"]),e($).getLogin?v("",!0):(i(),n("div",Bs,[s("span",{onClick:A},"\u767B\u5F55\u540E\u67E5\u770B\u5168\u90E8\u6B4C\u66F2")]))],64))])])]),s("div",Ms,[e(t).playlists.length?(i(),n(g,{key:0},[As,s("div",Ts,[(i(!0),n(g,null,L(e(t).playlists,o=>(i(),k(_,{class:"recom-item",to:{path:"/playlist/detail",query:{id:o.id}},key:o.id},{default:r(()=>[p(y,{src:o.coverImgUrl},{default:r(()=>[Vs]),_:2},1032,["src"]),s("div",Hs,[s("div",Rs,l(o.name),1),s("div",xs,[zs,p(_,{to:{path:"/home",query:{id:o.creator.userId}}},{default:r(()=>[u(l(o.creator.nickname),1)]),_:2},1032,["to"])])])]),_:2},1032,["to"]))),128))])],64)):v("",!0),e(t).comments.length?(i(),n("div",js,[Es,s("div",Fs,[(i(!0),n(g,null,L(e(t).comments,o=>(i(),n("div",{class:"comment-item",key:o.commentId},[p(_,{to:{path:"/home",query:{id:o.commentId}}},{default:r(()=>[p(y,{src:o.user.avatarUrl},{default:r(()=>[Ps]),_:2},1032,["src"])]),_:2},1032,["to"]),s("div",Gs,[s("div",Ks,[p(_,{to:{path:"/home",query:{id:o.commentId}},class:"comment-name"},{default:r(()=>[u(l(o.user.nickname),1)]),_:2},1032,["to"]),s("span",Os,l(a.$utils.formatMsgTime(o.time)),1)]),s("div",Ws,l(o.content),1)])]))),128))])])):v("",!0)])])])}}};var Zs=R(Xs,[["__scopeId","data-v-3acc02c9"]]);export{Zs as default};
