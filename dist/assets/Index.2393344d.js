import{U as N,M as S,a5 as D,a6 as B,K as O,o as V,a7 as F,X as R,h as l,j as v,k as s,z as n,a as e,m as u,I as c,x as k,$ as d,l as y,a8 as U,G as I,H as L,V as q,W as H,a9 as j,B as z}from"./index.d80bb040.js";import{E as K,a as P}from"./el-skeleton-item.d9bf27c5.js";const r=m=>(q("data-v-0e067f4e"),m=m(),H(),m),A={class:"rank"},G={class:"rank-container"},W={class:"rank-main"},X={class:"cover-info"},Y={class:"cover-author"},J={class:"cover-digital"},Q={class:"cover-desc"},Z={class:"cover"},ss={class:"cover-img"},ts=r(()=>s("div",{slot:"placeholder",class:"image-slot"},[s("i",{class:"iconfont icon-placeholder"})],-1)),es={class:"cover-info"},as={class:"cover-header"},os={class:"cover-title"},ns={key:0,class:"cover-author"},cs=r(()=>s("div",{slot:"placeholder",class:"image-slot"},[s("i",{class:"iconfont icon-placeholder"})],-1)),is={class:"cover-name"},ls={class:"cover-date"},rs={class:"cover-digital"},ds={class:"cover-playCount"},_s=r(()=>s("i",{class:"iconfont icon-playnum"},null,-1)),vs={class:"cover-collect"},hs=r(()=>s("i",{class:"iconfont icon-collect"},null,-1)),ps={class:"cover-comment"},us=r(()=>s("i",{class:"iconfont icon-comment"},null,-1)),ms={class:"cover-desc"},fs=r(()=>s("h5",{class:"cover-desc-title"},"\u6B4C\u5355\u7B80\u4ECB",-1)),gs=["innerHTML"],ks={class:"song-main"},ys={class:"song-header"},Is=d("\u6B4C\u66F2\u5217\u8868 "),Ls=r(()=>s("span",{class:"play-all"},[s("i",{class:"iconfont icon-audio-play"}),d(" \u64AD\u653E\u5168\u90E8")],-1)),Ts={class:"rank-aside"},ws={class:"rank-aside-title"},bs={class:"rank-aside-main"},xs=["onClick"],$s=r(()=>s("div",{slot:"placeholder",class:"image-slot"},[s("i",{class:"iconfont icon-placeholder"})],-1)),Cs={class:"item-info"},Es={class:"item-title"},Ms={class:"item-time"},Ns={setup(m){const{proxy:h}=S(),T=D(),w=B(),b=[{name:"TOP\u699C",type:"Top"},{name:"\u7279\u8272\u699C",type:"Feature"},{name:"\u573A\u666F\u699C",type:"Other"}],t=O({category:[],isLoading:!0,rankInfo:{},songList:[],total:0,loading:!0}),x=async()=>{const{data:a}=await h.$http.topListDetail();if(a.code!==200)return h.$msg.error("\u6570\u636E\u8BF7\u6C42\u5931\u8D25");b.forEach(f=>{let o={};o.title=f.name,o.list=a.list.filter(i=>{let _=!1;switch(f.type){case"Top":_=i.ToplistType;break;case"Feature":_=!i.ToplistType&&i.name.indexOf("\u4E91\u97F3\u4E50")>=0;break;case"Other":_=!i.ToplistType&&i.name.indexOf("\u4E91\u97F3\u4E50")<0;break}return _}),t.category.push(o),t.rId=t.rId?t.rId:t.category[0].list[0].id})},$=a=>{t.rId=a.id,w.push({path:"rank",query:{rId:t.rId}})},C=async()=>{t.isLoading=!0;const{data:a}=await h.$http.playListDetail({id:t.rId,s:-1});if(a.code!==200)return h.$msg.error("\u6570\u636E\u8BF7\u6C42\u5931\u8D25");t.rankInfo=a.playlist,t.songList=h.$utils.formatSongs(a.playlist.tracks,a.privileges),t.total=t.songList.length,t.isLoading=!1,t.loading=!1};return V(()=>{t.rId=T.query.rId,x()}),F(()=>{t.rId&&(t.loading=!0,C())}),(a,f)=>{const o=K,i=R,_=P,E=j;return l(),v("div",A,[s("div",G,[s("div",W,[n(_,{class:"cover",loading:e(t).loading,animated:"",throttle:500},{template:u(()=>[n(o,{variant:"image",class:"cover-img"}),s("div",X,[n(o,{variant:"h3",class:"skeleton-title"}),s("div",Y,[n(o,{variant:"image",class:"cover-avatar"}),n(o,{variant:"p",class:"cover-name",style:{width:"10%"}}),n(o,{variant:"p",class:"cover-date",style:{width:"10%"}})]),s("div",J,[n(o,{variant:"p",class:"cover-playCount",style:{width:"25%"}}),n(o,{variant:"p",class:"cover-collect",style:{width:"25%"}}),n(o,{variant:"p",class:"cover-comment",style:{width:"25%"}})]),s("div",Q,[n(o,{variant:"p",class:"cover-desc-title",style:{width:"10%"}}),n(o,{variant:"text",class:"skeleton-desc-text",style:{width:"100%"}}),n(o,{variant:"text",class:"skeleton-desc-text",style:{width:"70%"}})])])]),default:u(()=>[s("div",Z,[s("div",ss,[n(i,{src:e(t).rankInfo.coverImgUrl},{default:u(()=>[ts]),_:1},8,["src"])]),s("div",es,[s("div",as,[s("div",os,[d(c(e(t).rankInfo.name)+" ",1),s("span",null,"("+c(a.$utils.formartDate(e(t).rankInfo.updateTime,"MM\u6708dd\u65E5"))+" \u66F4\u65B0)",1)])]),e(t).rankInfo.creator?(l(),v("div",ns,[n(i,{src:e(t).rankInfo.creator.avatarUrl,class:"cover-avatar"},{default:u(()=>[cs]),_:1},8,["src"]),s("div",is,c(e(t).rankInfo.creator.nickname),1),s("div",ls,c(a.$utils.formartDate(e(t).rankInfo.createTime,"yyyy-MM-dd")),1)])):z("",!0),s("div",rs,[s("span",ds,[_s,d(" "+c(a.$utils.formartNum(e(t).rankInfo.playCount))+"\u6B21",1)]),s("span",vs,[hs,d(" "+c(a.$utils.formartNum(e(t).rankInfo.subscribedCount)),1)]),s("span",ps,[us,d(" "+c(a.$utils.formartNum(e(t).rankInfo.commentCount)),1)])]),s("div",ms,[fs,s("p",{class:"cover-desc-text",innerHTML:e(t).rankInfo.description},null,8,gs)])])])]),_:1},8,["loading"]),s("div",ks,[s("div",ys,[s("h4",null,[Is,s("em",null,c(e(t).total+"\u9996\u6B4C"),1)]),Ls,s("span",{class:k(["collect",e(t).rankInfo.subscribed?"active":""])},[s("i",{class:k(["iconfont","icon-collect"+(e(t).rankInfo.subscribed?"-active":"")])},null,2),d(" "+c(e(t).rankInfo.subscribed?"\u5DF2\u6536\u85CF":"\u6536\u85CF"),1)],2)]),e(t).isLoading?(l(),y(U,{key:0})):(l(),y(E,{key:1,songList:e(t).songList},null,8,["songList"]))])]),s("div",Ts,[(l(!0),v(I,null,L(e(t).category,g=>(l(),v("div",{class:"rank-aside-nav",key:g.title},[s("div",ws,c(g.title),1),s("div",bs,[(l(!0),v(I,null,L(g.list,(p,M)=>(l(),v("div",{class:k(["rank-aside-item",{active:e(t).rId==p.id}]),key:M,onClick:Ss=>$(p)},[n(i,{class:"item-img",src:p.coverImgUrl},{default:u(()=>[$s]),_:2},1032,["src"]),s("div",Cs,[s("div",Es,c(p.name),1),s("div",Ms,c(p.updateFrequency),1)])],10,xs))),128))])]))),128))])])])}}};var Os=N(Ns,[["__scopeId","data-v-0e067f4e"]]);export{Os as default};
